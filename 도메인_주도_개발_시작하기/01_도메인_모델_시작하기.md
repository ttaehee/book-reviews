# Chapter 1 : 도메인 모델 시작하기

- [도메인이란?](#도메인이란)
- [도메인 모델](#도메인-모델)
- [도메인 모델 패턴](#도메인-모델-패턴)
- [밸류 타입](#밸류-타입)
- [유비쿼터스 언어](#유비쿼터스-언어)
- [💡 생각해볼 점](#-생각해볼-점) 

<br/>

## 도메인이란?
- `소프트웨어로 해결하고자 하는 문제 영역`
  - 하나의 도메인은 여러 하위 도메인으로 나뉠 수 있음
  - 도메인마다 고정된 하위 도메인이 존재하는 것은 아님 또한, 하위 도메인을 어떻게 구성할지 여부는 상황에 따라 달라짐

<br/>

## 도메인 모델
- 특정 도메인을 개념적으로 표현한 것
- 도메인 모델을 보면 모든 내용을 알 수 있는 것은 아니지만 `해당 도메인이 어떤 기능을 수행할 수 있는지` 도메인을 이해하는데 도움을 줌

<br/>

## 도메인 모델 패턴

|영역|설명|
|------|---|
|사용자 인터페이스 (표현 계층)|사용자의 요청을 처리하고 `응답`하는 계층|
|응용 계층|사용자가 `요청한 기능을 실행`하는 계층, 로직을 `직접 구현하는 것이 아니라 도메인 계층을 조합`해서 기능을 실행|
|도메인 계층|	시스템이 제공할 `도메인 규칙`을 구현|
|인프라스트럭처 계층|	데이터베이스나 메시징 시스템과 같은 `외부 시스템과의 연동`을 처리하는 계층|

<br/>

## 밸류 타입 
- 개념적으로 `하나로 표현할 수 있는 데이터`를 하나의 값으로 묶어낸 것을 의미
  - ex) 주소(Address)의 경우 상세주소, 우편번호등 다양한 데이터를 포함     
    -> 개념적으로 `하나의 데이터`로 표현될 수 있고, 이런 경우 `하나의 밸류 타입`으로 묶어낼 수 있음

- 밸류 타입은 별도의 식별자가 없고, `객체 자체로 의미`를 명확히 표현 가능
  - ex) Address, Money 등
    - `int타입의 price와 amounts` 필드 -> `밸류 타입인 Money` 타입으로 대체    
      -> 의미를 보다 명확하게 표현 + 밸류 타입이 가지고 있는 기능(밸류 타입을 위한 기능) 이용 가능    
      -> 캡슐화 가능

<br/>

- Before

```java
public class OrderLine {
 private Product product;
 private int price;
 private int quantity;
 private int amount;

 ...
}
```

- After

```java
class Money { 
	private final int value;

	public Money add(Money money) {
		return new Money(this.value + money.value);
	}
}
```

```java
public class OrderLine {
 private Product product;
 private Money price;
 private int quantity;
 private Money amount;

 ...
}
```

<br/>

- 밸류 객체의 데이터를 변경할 때는, 기존 데이터를 변경하기보다는 `변경한 데이터를 갖는 새로운 밸류 객체를 생성`하는 방식 추천
- `불변으로 구현`하는 이유는 불변 타입을 사용하면 보다 `안전한 코드 작성` 가능

<br/>

## 유비쿼터스 언어

- `도메인 전문가, 관계자, 개발자`가 `도메인과 관련된 공통의 언어`를 만들고     
  -> 대화, 문서, 도메인 모델, 코드 테스트 등 `모든 곳에서 같은 용어 사용`     
  -> 소통 과정에서의 `모호함 감소`   

<br/>

## 💡 생각해볼 점
- `밸류 타입의 단점`은?
  - 음.. `관리할 클래스`가 많아진다?
  - 실제로 코드 짜면서 밸류 타입을 많이 사용해서 설계해본적은 없는듯 하다    
    그치만 `밸류 타입을 위한 기능을 추가해서 캡슐화할 수 있다는 점`이 굉장히 좋아보여 사용 시도를 해보아야겠다

- `불변 객체의 장점`은?
  - 일단, 저자가 말한 것처럼 값의 수정이 불가능하기 때문에 객체의 상태가 변경되지 않아 `객체의 신뢰성`이 높음
  - `thread safe` -> 병렬 프로그래밍에 유용 + 동기화를 고려 불필요
  - 부수 효과(변수의 값이나 상태 등의 변화로 인해 발생하는 효과) 최소화 -> `유지보수`성 높은 코드 작성 가능

- 내가 이해한 1장
  - `개발자에게 필요한 역량`
    - 소프트웨어로 해결해야할 도메인 영역을 구분, 이해하고
    - 도메인 전문가와 소통하는 과정에서 요구사항을 정확히 파악해서
    - 소프트웨어로서 그 문제를 해결하는 것

- 요즘 일하면서 기획자, 디자이너 뿐 아니라 프론트와도 도메인에 대한 명칭을 다르게 가져가 확인 및 픽스 절차를 가졌던 적이 있어 유비쿼터스 언어에 대한 이야기가 와닿았다   
  자세하게 기록해두진 못하지만, 진행 절차에 대한 용어였는데 상의 후 백엔드쪽에서는 enum으로 관리하는 방향으로 풀어갔다

<br/>
