## Chapter 6 : 객체 지도  

<br/>  

- [기능과 구조](#기능과-구조)
  - [기능설계 VS 구조설계](#기능설계-VS-구조설계)
  - [두가지 재료 : 구조와 기능](#두가지-재료-구조와-기능)
  - [재료합치기 : 기능과 구조의 통합](#재료합치기-기능과-구조의-통합)
- [책임-주도 설계](#책임-주도-설계)
- [도메인 모델을 기반으로 객체구조를 설계하는 이유](#도메인-모델을-기반으로-객체구조를-설계하는-이유)
- [💡 생각해볼 점](#-생각해볼-점)    

<br/> 

### 기능과 구조

#### 기능설계 VS 구조설계 

- `기능설계` : 제품이 사용자를 위해 `무엇을` 할 수 있는지
- `구조설계` : 제품의 `형태`가 어떠해야 하는지
  - 시스템 기능을 객체 간의 책임으로 분배 
  - 기능이 변경되더라도 객체 간의 구조는 그대로 유지됨   

<br/>

- `성공적인 소프트웨어`들이 지닌 공통적인 특징은     
  사용자가 만족하는 `기능을 제공`하는 동시에    
  사용자가 원하는 `새로운` 기능을 빠르고 안정적으로 `추가`할 수 있다는 것    
  
  => 예측불가능한 요구사항 변경에 유연하게 대처할 수 있는 안정적인 구조를 제공해야 함  
 
- 설계가 어려운 이유 : 오늘 요구사항 충족시켰는데, 내일 변경될지도 모르는 요구사항도 수용가능한 코드여야 하니까
  - 미래를 예측할 순 없지만 대비하자 

<br/><br/>

#### 두가지 재료 : 구조와 기능

**안정적인 재료 : 구조**     
- `구조` : 사용자나 이해 관계자들이 `도메인에 관해 생각하는 개념`과 개념들 간의 `관계`로 표현 -> `도메인 모델링`

<br/>
   
- 도메인 : 사용자가 프로그램을 `사용하는 대상` 분야 = 소프트웨어가 목적하는 영역
- 모델 : 대상을 선택적으로 의식화하고 `구조화` 하여 표현

=> `도메인 모델`이란    
`소프트웨어가 목적하는 영역`에 대한 지식을 선택적으로 `단순화`하고    
의식적으로 `구조화(개념과 개념 간의 관계 등을 주의 깊게 추상화)`한 형태    

<br/>

- 도메인 모델 : 사용자들이 `도메인을 바라보는 관점`에서 구조화     
  -> 현실에 존재하지 않는 경우가 더 많음    
  -> `멘탈모델`(사용자가 해당 도메인을 떠올렸을 때 생각하는)에 초점  

<br/> 

- 도메인 모델   
  = 사용자들이 도메인을 바라보는 관점(멘탈모델)   
  = 설계자가 시스템 구조를 바라보는 관점    
  = 소프트웨어 안에 구현된 코드 그 자체   
  가 성립하는 것이 이상적인 시스템   

<br/>

**불안정한 재료 : 기능**   
- `기능` : 사용자의 목표를 만족시키기 위해 책임을 수행하는 `시스템의 행위`로 표현 -> `유스케이스 모델링`

- `유스케이스` : 사용자 - 시스템 간의 `상호작용의 흐름`을 텍스트로 정리한 것   
  - 객체지향과 연관 없음, 설계기법도 아님    
  - 핵심은 `사용자의 목표`
    - 공통의 사용자 목표를 통해 연관된 `시나리오(시스템을 사용하는 경로)`의 집합   
  - 시스템의 행위에 초점을 맞춤
    - `사용자`가 시스템을 통해 `무엇을 얻을` 수 있고 `어떻게 상호작용` 할 수 있느냐에 대한 정보만 기술
    - 요구사항이 자주 변경되는 사용자 인터페이스와 관련된 세부 정보는 담지 않음

<br/><br/>

#### 재료합치기 : 기능과 구조의 통합   

- 도메인 모델 -> 안정적인 구조를 개념화하기 위해  
- 유스케이스 -> 불안정한 기능을 서술하기 위해 사용하는 도구

<br/>
 
- 변경에 유연한 소프트웨어를 만들기 위해서    
  유스케이스에 정의된 시스템의 기능(시스템의 책임)을 도메인 모델을 기반으로 한 객체들의 책임으로 분배   
  = `불안정한 기능을 담는 안정적인 도메인 모델`     
  - `책임 할당의 기본 원칙` : 책임을 수행하는데 필요한 `정보를 가진` 객체들에게 그 `책임을 할당`하는 것 
    - 그래야 관련된 `상태, 행동을 캡슐화`해서 `자율적인 객체`가 될 수 있으니까    

<br/>

### 책임-주도 설계

- `책임-주도 설계`는    
  `유스케이스`로부터 `첫 번째 메시지`와 사용자가 달성하려는 `목표`를,     
  `도메인 모델`로부터 기능을 수용할 수 있는 `안정적인 구조`를 제공받아    
  실제로 동작하는 `객체들의 협력 공동체`를 창조함
<br/>

**ex) 정기 예금을 중도 해지할 경우 지급받을 수 있는 이자액을 계산하는 기능을 구현**       
- 협력의 시작 : 첫 번째 메시지 (시스템의 기능을 시스템의 책임으로 바꾼 후 얻어진 것)   
  - 시스템이 '중도 해지 이자액을 계산하라'라는 메시지를 받는 거대한 객체
- `시스템`에 할당된 `커다란 책임` -> 시스템 안의 `작은 규모의 객체`들이 수행해야 하는 더 작은 규모의 책임으로 `세분화`. 
  - 도메인 모델을 통해, 이자 계산이라는 시스템 책임을 분배할 객체 구조 구성
- 도메인 모델에 포함된 개념을 `은유`하는 소프트웨어 객체 선택 (소프트웨어와 코드 사이의 표현적 차이를 줄이는 것)
  - 정기예금, 계좌, 이자율 객체
- 협력을 완성하는데 필요한 메시지를 식별하면서 객체들에게 `책임 할당`
  - 정기예금 : 이자계산을 시작하는 책임
  - 계좌 : 예금액과 해지일자를 이자율에게 전달해 이자 계산하게 하는 책임
  - 이자율 : 전달받은 예금액과 해지일자를 이용해 이자액을 계산한 후 이자액을 포함하는 이자를 생성해 반환하는 책임   
- 협력에 참여하는 객체를 구현하기 위해 클래스를 추가하고 속성과 메서드 구현  

<br/><br/>

### 도메인 모델을 기반으로 객체구조를 설계하는 이유
도메인 모델이 `안정적`이기 때문    
기능 변경을 흡수하는 안정적인 구조

- 안정적인 이유
  - 도메인 모델을 구성하는 개념은 비즈니스가 없어지거나 완전히 개편되지 않는한 유지됨    
    = 시스템의 `기능이 변경`되더라도 비즈니스 핵심규칙이 변경되지 않는한 `자체구조가 흔들리지 않음`(객체 간의 관계는 일정하게 유지)   
    - 책임과 객체 간의 대응 관계만 수정될 뿐

=> 변경에 대한 파급효과를 최소화 + 요구사항 변경에 유연하게 대응할 수 있는 시스템 구축가능

=> 도메인 주도 개발은 `도메인모델 - 코드`를 `밀접하게 연관`시키기위해 노력    
-> 이것은 유지보수 쉽고 유연한 객체지향 시스템 만드는 첫걸음

<br/>

### 💡 생각해볼 점   
> 유일하게 변하지 않는 것은 모든것이 변한다는 사실뿐이다 - Heraclitus

- 이번 장은 '기능이 아니라 구조, 즉 개념간의 관계에 초점을 맞추어야 유지보수에 효율적이다'가 핵심이라고 받아들였다   
  저자가 앞에서 계속 말하던 '객체간의 메시지에 맞추어 설계하자'라는 말과 이어지는 느낌이었다    
    - 바우처 과제 할 때 매주 요구사항이 바뀌었었는데, 요구사항이 변경될 때마다 머리가 깨지는줄,,    
      기능에 초점을 맞추어 만들었다보니 그랬던듯하다   
      관계, 메시지에 초점을 맞추어 다시 설계를 해보며 차이가 있는지, 어떻게 있는지 느껴봐야겠다  
  
- 프로젝트 진행 시, 유즈케이스 작성 후 그로부터 도메인을 이끌어냈었는가에 대해 생각해보았다   
  그러지 않았었고 이번 프로젝트에서는 요구사항과 내용을 정리 후 단계를 밟아가며 적용해봐야겠다   
  
- 흥미로운 이야기를 들었다   
  우리나라에서 Object를 객체로 표현하는 것에 반대하는 입장이었다        
  사전에서 객체는 주체로부터 독립되어 있는 인간의 인식과 실천의 대상, 문장 내에서 동사의 행위가 미치는 대상이라고 나온다    
  그리고 객체는 주체의 반대말이고, 이는 어떤 행위를 당하는 대상의 느낌이 드니 개체라는 단어가 더 어울린다는 의견이었다      
    - 프로그래밍에서의 객체로 배우고, 단어에 관한 생각을 해본적 없이 당연하게 받아들였는데    
      이렇게 생각이 연결될 수 있다는게 흥미로웠고 듣고나니 어느정도 설득되었다   
      다만, 이미 많이 object - 객체로 알려진만큼 사전에 프로그래밍에서의 객체로 추가되는 것은 어떨까하는 나의 바람    
  
<br/>
