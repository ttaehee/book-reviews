## Chapter 4 : 역할, 책임, 협력

<br/>

- [역할](#역할)
- [책임](#책임)  
- [협력](#협력)
- [객체지향 설계 기법](#객체지향-설계-기법)
- [💡 생각해볼 점](#-생각해볼-점)

<br/>

### 역할
- 역할의 `대체 가능성`은 `행위 호환성`을 의미
  - 행위 호환성은 `동일한 책임`의 수행을 의미  
  
    = 대체할 수 있는 객체는 `동일한 메시지를 이해`할 수 있는 객체로 한정   

<br/>
    
- 역할은 객체지향 설계의 `단순성, 유연성, 재사용성`을 뒷받침하는 핵심 개념
- 역할의 가장 큰 가치
  - 하나의 협력 안에 여러 종류의 객체가 참여할 수 있게 함으로써 `협력을 추상화할 수 있다`는 것

<br/>

### 책임
객체에게 요청 = 그 객체가 요청을 처리할 책임이 있음을 의미   
어떤 객체가 특정한 요청을 받아들일 수 있는 이유는 그 요청에 대해 `응답하는데 필요`한 `지식과 행동 방식`을 가지고 있기 때문  

- 책임은 객체의 `공용 인터페이스(public interface)`를 구성
  - `아는것 knowing` : 객체의 외부에 제공해 줄 수 있는 `정보`
  - `하는것 doing` : 외부에 제공해줄 수 있는 `서비스`의 목록

<br/>

### 협력  
객체 간의 협력은 메시지를 통해 이루어짐     
=> 개별적인 객체의 `상태가 아니라` `객체의 책임과 상호작용`에 집중하자

- 협력은 객체의 모양을 결정함
  - 데이터나 클래스를 중심으로 application을 설계하기보다,   
    설계에 참여하는 객체들이 `주고받을 요청과 응답의 흐름`을 결정하자    
    
  - 협력이라는 문맥에서
    - 객체가 수행할 적절한 `책임` 부여
    - 그 책임을 행하는데 `필요한 데이터` 고민
    - 협력에 참여하기 위한 객체의 데이터와 행동이 결정된 후 `클래스의 구현 방법` 결정  

<br/>

### 객체지향 설계 기법   
역할, 책임, 협력의 관점에서 애플리케이션을 설계하는 유용한 3가지 방법

- `책임 주도 설계`
  - 협력에 필요한 책임들을 식별하고 적합한 객체에서 책임을 할당하는 방식
- `디자인 패턴`
  - 반복적으로 사용하는 문제해결을 위한 설계 템플릿
- `테스트 주도 개발`
   - 테스트를 먼저 작성하고 테스트를 통과하는 구체적인 코드를 작성하는 방식
   - 객체의 역할이 메시지를 수신할 때 `어떤 결과를 반환`하고 그 과정에서 `어떤 협력을 할것인`지에 대한 `기대`를 코드의 형태로 작성
   - 책임-주도 설계의 기본 개념을 따름   
     책임-주도 설계를 통해 도달해야 하는 목적지를 `테스트라는 안정장치`를 통해 좀 더 빠르고 견고한 방법으로 도달할 수 있도록 해줌  

<br/><br/>

### 💡 생각해볼 점   
- TDD에서 테스트코드는 어떤 객체가 어떤 역할을 하는지 미리 정하고, 실제로 그렇게 수행하도록 코드를 짜야한다고 한다       
  나는 진입장벽이 느껴지던데, 클래스부터 설계하려고 해서 TDD가 그렇게 어려웠던걸까?     
  저자의 말처럼 책임-주도 설계와 패턴을 종합적으로 이해하고 좋은 설계에 대한 감각과 경험을 기른후에 적용한다면 다르게 다가올지 궁금하다     
  기른 후 적용해볼 수 있도록 계속 공부해나가자  
- 저자는 `역할이 동일한 객체가 여러개 존재할 경우, 관계를 추상화해서 표시할 수 있다`고 한다      
  그렇다면 추상화하는 대표적인 방법인 상속과 인터페이스는 또 어떤 기준을 사용할까     
- 지난번 장에서 저자는 `타입은 결국 추상화다, 타입을 결정하는 것은 행동이다` 라고 말했는데, 그러면 역할을 타입으로 표현하는 것일까   
    - 객체의 타입은 객체의 행동이 결정하고, 같은 타입에 속한 객체는 행동만 동일하다면 서로 다른 데이터를 가질 수 있고, 이는 다형성을 의미
    - 타입을 역할로 바꿨을 때도 일치하는 문장이 된다    
      현재까지는 역할을 타입으로 표현할 수 있다로 결론      
      저자가 말하고 싶은바가 뒤에 더 나오면 좋겠고 더 나올듯 하다     
    
<br/>
